---
name: four-phase-review
description: >
  レビュー担当ワーカーが使用する。four-phase-workflow の各フェーズ内レビューループで、
  成果物をレビューし報告ドキュメントを作成・更新する。
  以下の場面で使用する:
  (1) 計画レビュー (Phase 1)
  (2) デザインレビュー (Phase 2)
  (3) 実装レビュー (Phase 3)
  (4) テスト結果レビュー (Phase 4)
  (5) 修正後の再レビュー (全フェーズ共通)
---

# Four-Phase Review

## 原則

- レビュー基準はそのフェーズの入力ドキュメント（計画、デザイン仕様等）である
- 主観的な好みではなく、基準との整合性で判断する
- 報告を作成・更新するまでがこのスキルの責務。フェーズ遷移の判断はマネージャーが行う

## ワークフロー上の位置づけ

```
マネージャー: ワーカーの作業完了 → レビュー依頼
                                      ↓
レビュアー:                     レビュー実施（このスキル）
                                      ↓
                                報告ドキュメント作成
                                      ↓
マネージャー:                報告を確認 → 判断
                             ↓               ↓
                         APPROVED        CHANGES_REQUESTED
                             ↓               ↓
                       次フェーズへ      ワーカーに修正指示
                                             ↓
                                          修正完了
                                             ↓
レビュアー:                          再レビュー（このスキル）
```

このフローが Phase 1〜4 すべてで繰り返される。

## フェーズ別レビュー観点

### Phase 1: Plan レビュー

基準: オーナー/ステークホルダーの要件

1. **要件網羅**: 要件がすべて計画に反映されているか
2. **実現可能性**: 技術的に実行可能なタスク分解になっているか
3. **明確性**: 各タスクが独立して実行できる粒度か、曖昧な記述はないか

### Phase 2: Design レビュー

基準: 承認済み計画ドキュメント

1. **計画準拠**: 計画の要件がデザインに反映されているか
2. **一貫性**: UI/UXの一貫性、ビジュアルの統一性
3. **実装可能性**: プログラマーがデザインから実装できる十分な情報があるか

### Phase 3: Implementation レビュー

基準: 承認済み計画 + 承認済みデザイン

1. **計画準拠**: 計画に記載された各ステップが実装されているか
2. **デザイン準拠**: デザインどおりのUI/動作になっているか
3. **過不足**: 計画にない変更が含まれていないか、漏れがないか
4. **検証結果**: 計画に定義された検証手順が通るか

### Phase 4: Test レビュー

基準: 承認済み計画 + 承認済みデザイン + テスト結果

1. **テスト網羅**: 要件に対して十分なテストが実施されているか
2. **不具合の妥当性**: 報告されたバグの再現性と深刻度が正しく評価されているか
3. **品質判定**: リリース基準を満たしているか

## レビュープロセス

### 1. 準備

1. マネージャーからの依頼内容を確認する（対象フェーズ、レビュー対象の成果物）
2. そのフェーズの基準ドキュメントを読む（上記「フェーズ別レビュー観点」参照）

### 2. 実施

上記のフェーズ別観点に従い、順に確認する。

### 3. 報告作成

project-docs スキルの報告ドキュメント形式に従って報告を作成する。

- 種別（review / bug / verification）を正しく設定する
- 指摘事項は「基準のどの部分に対する不整合か」を必ず明示する
- 曖昧な指摘をしない。具体的な修正内容を記載する

### 4. 再レビュー

マネージャーから再レビュー依頼を受けた場合:

1. **前回の指摘確認**: 前回 open だった指摘が解消されているか確認し、resolved に更新する
2. **退行確認**: 修正に伴い、前回問題なかった箇所が壊れていないか確認する
3. **判定更新**: 全指摘が resolved かつ新たな問題がなければ、判定を APPROVED に更新する

再レビューで新たな問題が見つかった場合:

1. 既存の報告ドキュメントに新しい指摘を追加する（open として）
2. 判定は CHANGES_REQUESTED のまま維持する

### ループが繰り返される場合

同じ報告で3回以上の修正ループが発生した場合、以下を検討しマネージャーに報告する:

- 指摘の根本原因が前のフェーズの成果物にある可能性
- ワーカーへの指示が不明確である可能性

## やらないこと

- 基準ドキュメントに記載のない品質基準での指摘
- 個人的なスタイルの押しつけ
- レビュアー自身による修正の実施
- フェーズ遷移の判断（マネージャーの責務）
- 報告を経ずにワーカーへ直接修正を依頼すること

## 停止条件

以下の場合はレビューを中断し、マネージャーに報告する:

- 基準ドキュメント自体に不備がある
- 成果物が基準と大幅に乖離しており、部分的な修正では対応できない
- レビュー対象が提示されていない
