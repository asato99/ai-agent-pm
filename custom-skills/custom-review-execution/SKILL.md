---
name: custom-review-execution
description: >
  レビュー・検証・バグ報告を担当する際に使用する。計画ドキュメントを基準とした体系的なレビューの実施と、
  報告ドキュメントの作成を行う。
  以下の場面で使用する:
  (1) コードレビューを実施する時
  (2) QA検証を実施する時
  (3) バグ報告を作成する時
  (4) 修正後の再レビューを実施する時
---

# Custom Review Execution

## 原則

レビューの基準は計画ドキュメントである。主観的な好みではなく、計画との整合性で判断する。

## ワークフロー上の位置づけ

このスキルの作業は、マネージャーのフェーズ管理（phased-workflow-management スキル）の一部として行われる。

```
マネージャー: Phase 2 完了 → Phase 3 Review 開始 → レビュー依頼
                                                      ↓
レビュアー:                                     レビュー実施（このスキル）
                                                      ↓
                                                報告ドキュメント作成
                                                      ↓
マネージャー:                               報告を確認 → 判断
                                            ↓               ↓
                                        APPROVED        CHANGES_REQUESTED
                                            ↓               ↓
                                      完了処理         ワーカーに修正指示
                                                            ↓
                                                       修正完了
                                                            ↓
レビュアー:                                        再レビュー（このスキル）
                                                            ↓
                                                    報告を更新
                                                            ↓
マネージャー:                                       再確認 → ...
```

報告を作成・更新するまでがこのスキルの責務。フェーズ遷移の判断はマネージャーが行う。

## レビュープロセス

### 1. 準備

1. 計画ドキュメントを読み、実装の期待内容を把握する
2. レビュー対象の成果物一覧を確認する
3. 計画に検証手順が定義されていれば、それをレビュー基準に含める

### 2. 実施

以下の観点で順に確認する:

1. **計画準拠**: 計画に記載された各ステップが実装されているか
2. **過不足**: 計画にない変更が含まれていないか、計画の項目に漏れがないか
3. **検証結果**: 計画に定義された検証手順が通るか

### 3. 報告作成

project-docs スキルの報告ドキュメント形式に従って報告を作成する。

- 種別（review / bug / verification）を正しく設定する
- 指摘事項は「計画のどの部分に対する不整合か」を必ず明示する
- 曖昧な指摘をしない。具体的な修正内容を記載する

### 4. 再レビュー

マネージャーからワーカーへの修正指示 → 修正完了後、再レビューが依頼される。

再レビュー時の確認手順:

1. **前回の指摘確認**: 前回 open だった指摘が解消されているか確認し、resolved に更新する
2. **退行確認**: 修正に伴い、前回問題なかった箇所が壊れていないか確認する
3. **判定更新**: 全指摘が resolved かつ新たな問題がなければ、判定を APPROVED に更新する

再レビューで新たな問題が見つかった場合:

1. 既存の報告ドキュメントに新しい指摘を追加する（open として）
2. 判定は CHANGES_REQUESTED のまま維持する

### ループが繰り返される場合

同じ報告で3回以上の修正ループが発生した場合、以下を検討しマネージャーに報告する:

- 指摘の根本原因が計画の不備にある可能性
- ワーカーへの指示が不明確である可能性
- 計画の前提が現状と合っていない可能性

## やらないこと

- 計画に記載のない品質基準での指摘
- 個人的なコーディングスタイルの押しつけ
- レビュアー自身による修正の実施
- フェーズ遷移の判断（マネージャーの責務）
- 報告を経ずにワーカーへ直接修正を依頼すること

## 停止条件

以下の場合はレビューを中断し、マネージャーに報告する:

- 計画ドキュメント自体に不備がある
- 成果物が計画と大幅に乖離しており、部分的な修正では対応できない
- レビュー対象が提示されていない
