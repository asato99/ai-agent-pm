# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¹ã‚­ãƒ«æ©Ÿèƒ½ è¨­è¨ˆæ›¸

## 1. æ¦‚è¦

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚¹ã‚­ãƒ«ï¼ˆã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ï¼‰ã‚’å‰²ã‚Šå½“ã¦ã€èµ·å‹•æ™‚ã«è‡ªå‹•é…ç½®ã™ã‚‹æ©Ÿèƒ½ã€‚

Claude Code / Gemini CLI ä¸¡å¯¾å¿œã€‚åŒä¸€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆ`skills/`ï¼‰ã§ã‚¹ã‚­ãƒ«ã‚’ç®¡ç†ã€‚

**ã‚¹ã‚­ãƒ«ã¯ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å½¢å¼ï¼ˆZIPï¼‰ã§ç®¡ç†ã—ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç­‰ã‚’å«ã‚€å®Œå…¨ãªã‚¹ã‚­ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚µãƒãƒ¼ãƒˆã€‚**

## 2. èƒŒæ™¯ã¨ç›®çš„

### 2.1 ç¾çŠ¶

- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ system_prompt ã®ã¿ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
- Claude Code ã®ã‚¹ã‚­ãƒ«æ©Ÿèƒ½ï¼ˆ`.claude/skills/`ï¼‰ã‚’æ´»ç”¨ã§ãã¦ã„ãªã„
- Gemini CLI ã‚‚åŒæ§˜ã«ã‚¹ã‚­ãƒ«æ©Ÿèƒ½ã‚’æ´»ç”¨ã§ãã¦ã„ãªã„

### 2.2 ç›®çš„

- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã”ã¨ã«ç•°ãªã‚‹ã‚¹ã‚­ãƒ«ã‚»ãƒƒãƒˆã‚’å‰²ã‚Šå½“ã¦å¯èƒ½ã«ã™ã‚‹
- ã‚¹ã‚­ãƒ«ã‚’ã‚¢ãƒ—ãƒªå´ã§ãƒã‚¹ã‚¿ç®¡ç†ã—ã€å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹
- GitHubç­‰ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚¹ã‚­ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½ã«ã™ã‚‹
- ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å«ã‚€å®Œå…¨ãªã‚¹ã‚­ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚µãƒãƒ¼ãƒˆ

---

## 3. ã‚¹ã‚­ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹é€ 

### 3.1 æ¨™æº–çš„ãªã‚¹ã‚­ãƒ«æ§‹é€ 

```
skill-name/
â”œâ”€â”€ SKILL.md              # å¿…é ˆ: æŒ‡ç¤ºã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ scripts/              # ã‚ªãƒ—ã‚·ãƒ§ãƒ³: å®Ÿè¡Œå¯èƒ½ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ extract.py
â”‚   â””â”€â”€ validate.sh
â”œâ”€â”€ templates/            # ã‚ªãƒ—ã‚·ãƒ§ãƒ³: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ output.json
â””â”€â”€ examples/             # ã‚ªãƒ—ã‚·ãƒ§ãƒ³: å‡ºåŠ›ä¾‹
    â””â”€â”€ sample.md
```

### 3.2 SKILL.md ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```markdown
---
name: code-review
description: ã‚³ãƒ¼ãƒ‰ã®å“è³ªã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹
---

## ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼æ‰‹é †

1. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã®ãƒã‚§ãƒƒã‚¯
2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œã®æ¤œå‡º
3. ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã®ç¢ºèª
4. æ”¹å–„ææ¡ˆã®æç¤º

## ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

`scripts/analyze.py` ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‰åˆ†æã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚
```

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 4.1 ã‚¹ã‚­ãƒ«å®šç¾©ï¼ˆSkillDefinitionï¼‰

ã‚¢ãƒ—ãƒªå´ã§ãƒã‚¹ã‚¿ç®¡ç†ã™ã‚‹ã‚¹ã‚­ãƒ«ã®å®šç¾©ã€‚

```swift
struct SkillDefinition: Identifiable {
    let id: SkillID
    let name: String              // è¡¨ç¤ºåï¼ˆã‚¢ãƒ—ãƒªã§ç·¨é›†å¯èƒ½ï¼‰
    let description: String       // æ¦‚è¦èª¬æ˜ï¼ˆã‚¢ãƒ—ãƒªã§ç·¨é›†å¯èƒ½ï¼‰
    let directoryName: String     // ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåï¼ˆã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã«æ±ºå®šã€å¤‰æ›´ä¸å¯ï¼‰
    let archiveData: Data         // ZIPã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã®ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿
    let createdAt: Date
    let updatedAt: Date
}
```

### 4.2 ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¹ã‚­ãƒ«å‰²ã‚Šå½“ã¦ï¼ˆAgentSkillAssignmentï¼‰

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã‚¹ã‚­ãƒ«ã®å¤šå¯¾å¤šé–¢ä¿‚ã€‚

```swift
struct AgentSkillAssignment {
    let agentId: AgentID
    let skillId: SkillID
    let assignedAt: Date
}
```

### 4.3 ERå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Agent       â”‚       â”‚ AgentSkillAssignment â”‚       â”‚ SkillDefinition â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚â”€â”€1:Nâ”€â”€â”‚ agentId (FK)         â”‚       â”‚ id (PK)         â”‚
â”‚ name            â”‚       â”‚ skillId (FK)         â”‚â”€â”€N:1â”€â”€â”‚ name            â”‚
â”‚ provider        â”‚       â”‚ assignedAt           â”‚       â”‚ description     â”‚
â”‚ system_prompt   â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ directoryName   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚ archiveData     â”‚
                                                         â”‚ createdAt       â”‚
                                                         â”‚ updatedAt       â”‚
                                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

```sql
CREATE TABLE skill_definitions (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL,
    description TEXT NOT NULL DEFAULT '',
    directory_name TEXT NOT NULL UNIQUE,
    archive_data BLOB NOT NULL,
    created_at TEXT NOT NULL,
    updated_at TEXT NOT NULL
);

CREATE TABLE agent_skill_assignments (
    agent_id TEXT NOT NULL,
    skill_id TEXT NOT NULL,
    assigned_at TEXT NOT NULL,
    PRIMARY KEY (agent_id, skill_id),
    FOREIGN KEY (agent_id) REFERENCES agents(id) ON DELETE CASCADE,
    FOREIGN KEY (skill_id) REFERENCES skill_definitions(id) ON DELETE CASCADE
);
```

---

## 5. UIè¨­è¨ˆ

### 5.1 ã‚¹ã‚­ãƒ«ç®¡ç†ç”»é¢ï¼ˆè¨­å®š > Skillsï¼‰

**ã‚¹ã‚­ãƒ«ä¸€è¦§**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Skills                           [+ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  ğŸ“¦ pdf-extractor                               â”‚
â”‚     PDF form extraction                         â”‚
â”‚                                                 â”‚
â”‚  ğŸ“¦ code-review                                 â”‚
â”‚     Code quality review                         â”‚
â”‚                                                 â”‚
â”‚  ğŸ“¦ test-creation                               â”‚
â”‚     Unit test generation                        â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ã‚¹ã‚­ãƒ«ç·¨é›†ç”»é¢

ã‚¹ã‚­ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã§ç·¨é›†ç”»é¢ã‚’è¡¨ç¤ºã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ pdf-extractor                           [ä¿å­˜]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ åå‰:                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ PDF Extractor                               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚ æ¦‚è¦:                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ PDF form extraction                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå: pdf-extractor ï¼ˆå¤‰æ›´ä¸å¯ï¼‰       â”‚
â”‚                                                 â”‚
â”‚ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ:                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“„ SKILL.md                                 â”‚ â”‚
â”‚ â”‚ ğŸ“ scripts/                                 â”‚ â”‚
â”‚ â”‚    â””â”€ ğŸ“„ extract.py                         â”‚ â”‚
â”‚ â”‚ ğŸ“ templates/                               â”‚ â”‚
â”‚ â”‚    â””â”€ ğŸ“„ output.json                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚ [ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ]  [å†ã‚¤ãƒ³ãƒãƒ¼ãƒˆ]  [å‰Šé™¤]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ•ãƒ­ãƒ¼

1. [+ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ] ã‚¯ãƒªãƒƒã‚¯
2. ZIPãƒ•ã‚¡ã‚¤ãƒ« or ãƒ•ã‚©ãƒ«ãƒ€é¸æŠ
3. SKILL.md ã‹ã‚‰ name/description è‡ªå‹•æŠ½å‡º
4. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåå…¥åŠ›ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ãƒ•ã‚©ãƒ«ãƒ€å or ZIPåï¼‰
5. [ä¿å­˜]

### 5.4 ç·¨é›†å¯èƒ½é …ç›®

| é …ç›® | ç·¨é›† | èª¬æ˜ |
|------|------|------|
| åå‰ | âœ… å¯ | ã‚¢ãƒ—ãƒªã§è‡ªç”±ã«å¤‰æ›´ |
| æ¦‚è¦ | âœ… å¯ | ã‚¢ãƒ—ãƒªã§è‡ªç”±ã«å¤‰æ›´ |
| ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå | âŒ å›ºå®š | ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã«æ±ºå®š |
| ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ | âŒ è¡¨ç¤ºã®ã¿ | å†ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§æ›´æ–° |

### 5.5 ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¹ã‚­ãƒ«å‰²ã‚Šå½“ã¦

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè©³ç´°ç”»é¢ > ã€ŒManage Skillsã€ãƒœã‚¿ãƒ³ > ãƒ¢ãƒ¼ãƒ€ãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚¹ã‚­ãƒ«å‰²ã‚Šå½“ã¦: Worker-01                  [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ â˜‘ PDF Extractor                                â”‚
â”‚   PDF form extraction                           â”‚
â”‚                                                 â”‚
â”‚ â˜‘ Code Review                                  â”‚
â”‚   Code quality review                           â”‚
â”‚                                                 â”‚
â”‚ â˜ Test Creation                                â”‚
â”‚   Unit test generation                          â”‚
â”‚                                                 â”‚
â”‚              [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]  [ä¿å­˜]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

### 6.1 ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

```
{manager_working_dir}/
â””â”€â”€ .aiagent/
    â””â”€â”€ agents/{agent_id}/
        â”œâ”€â”€ .claude/                       â† Claude CLI ç”¨
        â”‚   â”œâ”€â”€ CLAUDE.md
        â”‚   â”œâ”€â”€ settings.json
        â”‚   â””â”€â”€ skills/
        â”‚       â”œâ”€â”€ code-review/
        â”‚       â”‚   â”œâ”€â”€ SKILL.md
        â”‚       â”‚   â””â”€â”€ scripts/
        â”‚       â”‚       â””â”€â”€ analyze.py
        â”‚       â””â”€â”€ pdf-extractor/
        â”‚           â”œâ”€â”€ SKILL.md
        â”‚           â”œâ”€â”€ scripts/
        â”‚           â”‚   â””â”€â”€ extract.py
        â”‚           â””â”€â”€ templates/
        â”‚               â””â”€â”€ output.json
        â”‚
        â””â”€â”€ .gemini/                       â† Gemini CLI ç”¨ï¼ˆåŒä¸€æ§‹é€ ï¼‰
            â”œâ”€â”€ GEMINI.md
            â”œâ”€â”€ settings.json
            â””â”€â”€ skills/
                â””â”€â”€ ...
```

---

## 7. MCP API

### 7.1 ã‚¹ã‚­ãƒ«å®šç¾© CRUD

```swift
// ã‚¹ã‚­ãƒ«ä¸€è¦§å–å¾—
func list_skill_definitions() -> [SkillDefinition]

// ã‚¹ã‚­ãƒ«ä½œæˆï¼ˆã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ‡ãƒ¼ã‚¿ä»˜ãï¼‰
func create_skill_definition(
    name: String,
    description: String,
    directoryName: String,
    archiveBase64: String  // ZIP ã® Base64 ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
) -> SkillDefinition

// ã‚¹ã‚­ãƒ«æ›´æ–°ï¼ˆåå‰ãƒ»æ¦‚è¦ã®ã¿ï¼‰
func update_skill_definition(
    skillId: SkillID,
    name: String?,
    description: String?
) -> SkillDefinition

// ã‚¹ã‚­ãƒ«å†ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ›´æ–°ï¼‰
func reimport_skill(
    skillId: SkillID,
    archiveBase64: String
) -> SkillDefinition

// ã‚¹ã‚­ãƒ«å‰Šé™¤
func delete_skill_definition(skillId: SkillID) -> Bool
```

### 7.2 ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¹ã‚­ãƒ«å‰²ã‚Šå½“ã¦

```swift
// ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚¹ã‚­ãƒ«ä¸€è¦§å–å¾—
func get_agent_skills(agentId: AgentID) -> [SkillDefinition]

// ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚¹ã‚­ãƒ«ã‚’å‰²ã‚Šå½“ã¦ï¼ˆå…¨ç½®æ›ï¼‰
func assign_skills_to_agent(
    agentId: AgentID,
    skillIds: [SkillID]
) -> Bool
```

### 7.3 CLIç”¨ã‚¹ã‚­ãƒ«ç™»éŒ²ãƒ„ãƒ¼ãƒ«ï¼ˆregister_skillï¼‰

CLIï¼ˆClaude Codeç­‰ï¼‰ã‹ã‚‰ã‚¹ã‚­ãƒ«ã‚’DBã«ç›´æ¥ç™»éŒ²ã™ã‚‹ãŸã‚ã®MCPãƒ„ãƒ¼ãƒ«ã€‚
ã‚¢ãƒ—ãƒªã®æ—¢å­˜ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆ`SkillArchiveService` â†’ `SkillDefinitionUseCases`ï¼‰ã‚’å†åˆ©ç”¨ã™ã‚‹ã€‚

#### å…¥åŠ›ã‚½ãƒ¼ã‚¹ï¼ˆæ’ä»–çš„ã«1ã¤ã‚’æŒ‡å®šï¼‰

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | èª¬æ˜ |
|-----------|------|
| `zip_file_path` | ZIPãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹ï¼ˆ`skills-archive/*.zip` ç­‰ï¼‰ |
| `folder_path` | ã‚¹ã‚­ãƒ«ãƒ•ã‚©ãƒ«ãƒ€ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹ï¼ˆSKILL.mdå«ã‚€ï¼‰ |
| `skill_md_content` | SKILL.mdã®ãƒ†ã‚­ã‚¹ãƒˆå†…å®¹ï¼ˆå˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ã‚­ãƒ«ç”¨ï¼‰ |

#### ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆä»»æ„ï¼‰

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | èª¬æ˜ |
|-----------|------|
| `name` | ã‚¹ã‚­ãƒ«è¡¨ç¤ºåï¼ˆçœç•¥æ™‚: SKILL.md frontmatterã‹ã‚‰æŠ½å‡ºï¼‰ |
| `description` | æ¦‚è¦èª¬æ˜ï¼ˆçœç•¥æ™‚: SKILL.md frontmatterã‹ã‚‰æŠ½å‡ºï¼‰ |
| `directory_name` | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåï¼ˆçœç•¥æ™‚: ZIPãƒ•ã‚¡ã‚¤ãƒ«å/ãƒ•ã‚©ãƒ«ãƒ€åã‹ã‚‰è‡ªå‹•ç”Ÿæˆï¼‰ |

#### å‡¦ç†ãƒ•ãƒ­ãƒ¼

```
å…¥åŠ›æ¤œè¨¼: zip_file_path / folder_path / skill_md_content ã®æ’ä»–ãƒã‚§ãƒƒã‚¯
    â†“
[zip_file_path]    â†’ Data(contentsOf:) â†’ SkillArchiveService.importFromZip()
[folder_path]      â†’ SkillArchiveService.importFromFolder()
[skill_md_content] â†’ SkillArchiveService.createArchiveFromContent() â†’ importFromZip()
    â†“
ImportedSkill ã‹ã‚‰ name/description/directoryName ã‚’å–å¾—ï¼ˆå¼•æ•°ã§ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰å¯ï¼‰
    â†“
SkillDefinitionUseCases.create(name:description:directoryName:archiveData:)
    â†“
æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´
```

#### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
MCPServer (MCPServerå±¤)
  â”œâ”€â”€ SkillArchiveService (UseCaseå±¤ - å…±æœ‰)  â† Appå´UIã‹ã‚‰ã‚‚ä½¿ç”¨
  â””â”€â”€ SkillDefinitionUseCases (UseCaseå±¤)     â† ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ + æ°¸ç¶šåŒ–
```

`SkillArchiveService` ã¯ UseCase å±¤ã«é…ç½®ã—ã€Appå´ã®UIï¼ˆSkillImportViewç­‰ï¼‰ã¨
MCPServerå´ã® register_skill ãƒ„ãƒ¼ãƒ«ã®ä¸¡æ–¹ã‹ã‚‰åˆ©ç”¨ã™ã‚‹å…±æœ‰ã‚µãƒ¼ãƒ“ã‚¹ã¨ã™ã‚‹ã€‚

### 7.4 Coordinatorç”¨API

```swift
// ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•æ™‚ã«å‘¼ã³å‡ºã—
func get_subordinate_profile(agentId: AgentID) -> SubordinateProfile

struct SubordinateProfile {
    let agentId: AgentID
    let name: String
    let systemPrompt: String
    let skills: [SkillInfo]  // ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ‡ãƒ¼ã‚¿å«ã‚€
}

struct SkillInfo {
    let id: SkillID
    let name: String
    let directoryName: String
    let archiveBase64: String  // ZIP ã® Base64 ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
}
```

---

## 8. Coordinator å‡¦ç†ãƒ•ãƒ­ãƒ¼

### 8.1 `_prepare_agent_context` ã®æ‹¡å¼µ

```python
async def _prepare_agent_context(
    self,
    agent_id: str,
    working_dir: str,
    provider: str
) -> str:
    context_dir = Path(working_dir) / ".aiagent" / "agents" / agent_id

    # ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ¥ã®è¨­å®šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
    if provider == "claude":
        config_dir = context_dir / ".claude"
    elif provider == "gemini":
        config_dir = context_dir / ".gemini"
    else:
        return str(context_dir)

    config_dir.mkdir(parents=True, exist_ok=True)

    # 1. ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å–å¾—ï¼ˆã‚¹ã‚­ãƒ«å«ã‚€ï¼‰
    profile = await self.mcp_client.get_subordinate_profile(agent_id)

    # 2. ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
    if provider == "claude":
        self._write_claude_md(config_dir, profile.system_prompt, working_dir)
        self._write_claude_settings(config_dir, working_dir)
    elif provider == "gemini":
        self._write_gemini_md(config_dir, profile.system_prompt, working_dir)
        self._write_gemini_settings(config_dir)

    # 3. ã‚¹ã‚­ãƒ«é…ç½®ï¼ˆZIPã‚’å±•é–‹ï¼‰
    self._write_skills(config_dir, profile.skills)

    return str(context_dir)
```

### 8.2 `_write_skills` å®Ÿè£…

```python
import base64
import io
import zipfile

def _write_skills(self, config_dir: Path, skills: list[SkillInfo]):
    """ã‚¹ã‚­ãƒ«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚’å±•é–‹ã—ã¦é…ç½®ã™ã‚‹ï¼ˆClaude/Geminiå…±é€šï¼‰"""
    skills_dir = config_dir / "skills"

    # æ—¢å­˜ã‚¹ã‚­ãƒ«ã‚’ã‚¯ãƒªã‚¢ï¼ˆæ¯å›å†ç”Ÿæˆï¼‰
    if skills_dir.exists():
        shutil.rmtree(skills_dir)

    if not skills:
        logger.debug("No skills to write")
        return

    for skill in skills:
        skill_path = skills_dir / skill.directory_name

        # Base64ãƒ‡ã‚³ãƒ¼ãƒ‰ â†’ ZIPå±•é–‹
        archive_bytes = base64.b64decode(skill.archive_base64)
        with zipfile.ZipFile(io.BytesIO(archive_bytes)) as zf:
            zf.extractall(skill_path)

        logger.debug(f"Extracted skill: {skill_path}")

    logger.info(f"Wrote {len(skills)} skills to {skills_dir}")
```

---

## 9. åˆ¶ç´„äº‹é …

### 9.1 ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œ

| ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ | ã‚¹ã‚­ãƒ«å¯¾å¿œ | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | å‚™è€ƒ |
|-------------|-----------|-------------|------|
| Claude | âœ… å¯¾å¿œ | `.claude/skills/` | ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µãƒãƒ¼ãƒˆ |
| Gemini | âœ… å¯¾å¿œ | `.gemini/skills/` | åŒä¸€æ§‹é€ ã§é…ç½® |

### 9.2 directoryName åˆ¶ç´„

- è‹±å°æ–‡å­—ã€æ•°å­—ã€ãƒã‚¤ãƒ•ãƒ³ã®ã¿è¨±å¯
- æœ€å¤§64æ–‡å­—
- é‡è¤‡ä¸å¯ï¼ˆä¸€æ„åˆ¶ç´„ï¼‰
- æ­£è¦è¡¨ç¾: `^[a-z0-9][a-z0-9-]*[a-z0-9]$`

### 9.3 ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–åˆ¶ç´„

| é …ç›® | åˆ¶é™ |
|------|------|
| æœ€å¤§ã‚µã‚¤ã‚º | 1MB |
| å½¢å¼ | ZIPï¼ˆéæš—å·åŒ–ï¼‰ |
| å¿…é ˆãƒ•ã‚¡ã‚¤ãƒ« | SKILL.md |
| ç¦æ­¢ãƒ•ã‚¡ã‚¤ãƒ« | .git/, node_modules/, __pycache__/ |

### 9.4 ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã«ä»¥ä¸‹ã‚’æ¤œè¨¼:
- SKILL.md ãŒå­˜åœ¨ã™ã‚‹ã“ã¨
- ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚µã‚¤ã‚ºãŒåˆ¶é™å†…ã§ã‚ã‚‹ã“ã¨
- ç¦æ­¢ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå«ã¾ã‚Œã¦ã„ãªã„ã“ã¨
- directoryName ãŒé‡è¤‡ã—ã¦ã„ãªã„ã“ã¨

---

## 10. æ±ºå®šäº‹é …

| é …ç›® | æ±ºå®š |
|-----|------|
| ãƒ—ãƒªã‚»ãƒƒãƒˆã‚¹ã‚­ãƒ«ã®æä¾› | ãªã—ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼‰ |
| ã‚¹ã‚­ãƒ«ç®¡ç†ç”»é¢ã®é…ç½® | è¨­å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼é…ä¸‹ |
| å€‹åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† | ãªã—ï¼ˆå†ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§æ›´æ–°ï¼‰ |
| åå‰ãƒ»æ¦‚è¦ã®ç·¨é›† | ã‚¢ãƒ—ãƒªå†…ã§å¯èƒ½ |

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | å†…å®¹ |
|------|------|
| 2026-01-28 | åˆç‰ˆä½œæˆ |
| 2026-01-29 | Geminiå¯¾å¿œè¿½åŠ  |
| 2026-01-29 | å®Ÿè£…è¨ˆç”»ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’åˆ†é›¢ |
| 2026-01-29 | description ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ  |
| 2026-01-29 | **ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å½¢å¼ã«å¤‰æ›´**: content â†’ archiveDataã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆ/ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¯¾å¿œ |
| 2026-02-10 | **register_skill MCPå†è¨­è¨ˆ**: SkillArchiveServiceã‚’UseCaseå±¤ã«ç§»å‹•ã—ã€MCPãƒãƒ³ãƒ‰ãƒ©ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’å†åˆ©ç”¨ã€‚zip_file_pathãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ ã€name/directory_nameã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«åŒ–ï¼ˆfrontmatterè‡ªå‹•æŠ½å‡ºï¼‰ |
