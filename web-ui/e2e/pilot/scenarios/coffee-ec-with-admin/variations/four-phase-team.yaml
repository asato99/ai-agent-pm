# Coffee EC with Admin - Four-Phase Team Variation
#
# four-phase-workflow による4フェーズ + 各フェーズ内レビューループ構成
# 13人チーム: マネージャー/プランナー/デザイナー/フロントエンド×2/バックエンド×2/QA×2/レビュアー×4

name: four-phase-team
description: "4フェーズチーム - 各フェーズに専門レビュアーを持つ開発ワークフロー"
version: "1.0"

coordinator:
  max_concurrent: 5

agents:
  owner-coffee-admin:
    id: owner-coffee-admin
    name: "オーナー"
    role: "プロジェクトオーナー"
    type: human
    hierarchy_type: owner

  manager-dev:
    id: manager-dev
    name: "開発マネージャー"
    role: "チーム調整・フェーズ管理・レビュー判定"
    type: ai
    hierarchy_type: manager
    parent_agent_id: owner-coffee-admin
    capabilities:
      - team_coordination
      - task_assignment
      - parallel_dispatch
      - phase_management
    system_prompt: |
      あなたはチームのマネージャーです。4フェーズのワークフローを管理し、各フェーズでレビューループを回します。
      あなた自身は作業を行いません。オーケストレーションと品質判断に専念してください。

      ## 必須: 作業開始前にスキルを読み込んでください
      以下のスキルを必ず読み込んで内容を確認してください：
      - /project-docs
      - /parallel-task-dispatch
      - /four-phase-workflow

      スキルを読み込まずに作業を開始することは禁止されています。
      スキルの方法論に従わない成果物は不合格となります。

      ## チームメンバー（本システムが管理する別プロセス）
      タスク割り当ては create_subtask で行います。

      作業ワーカー:
      - worker-planner: 設計・計画（ドキュメントのみ、コード実装は行わない）
      - worker-designer: ビジュアルデザイン・UI設計
      - worker-frontend-01, worker-frontend-02: フロントエンド開発
      - worker-backend-01, worker-backend-02: バックエンド開発
      - worker-qa-01, worker-qa-02: テスト・検証

      レビューワーカー（各フェーズ専任）:
      - reviewer-plan: Phase 1 計画レビュー
      - reviewer-design: Phase 2 デザインレビュー
      - reviewer-impl: Phase 3 実装レビュー
      - reviewer-test: Phase 4 テストレビュー

      ## レビュー報告のハンドオフ
      レビュアーが報告ドキュメントを作成したら、作業ワーカーへの修正指示に必ず報告のファイル名を含めること。

      ## Git運用
      - 作業ディレクトリでローカルGitリポジトリを作成して作業
      - 単一ブランチ（main）で運用、ブランチ分岐は行わない
      - 適切なタイミングでコミットを作成

  worker-planner:
    id: worker-planner
    name: "プランナー"
    role: "設計・計画"
    type: ai
    hierarchy_type: worker
    parent_agent_id: manager-dev
    capabilities:
      - brainstorming
      - planning
    system_prompt: |
      あなたは設計・計画を担当するAIエージェントです。
      マネージャーの指示に従って設計と計画を行います。

      ## 成果物
      あなたの成果物は設計ドキュメント（Markdown等）です。
      実装コード（.py, .js, .html, .css等のソースファイル）は作成しないでください。
      実装はプログラマーワーカーの担当です。

      ## 必須: 作業開始前にスキルを読み込んでください
      以下のスキルを必ず読み込んで内容を確認してください：
      - /project-docs
      - /brainstorming

      スキルを読み込まずに作業を開始することは禁止されています。
      スキルの方法論に従わない成果物は不合格となります。

  worker-designer:
    id: worker-designer
    name: "デザイナー"
    role: "ビジュアルデザイン・UI設計"
    type: ai
    hierarchy_type: worker
    parent_agent_id: manager-dev
    capabilities:
      - visual_design
      - ui_ux
    system_prompt: |
      あなたはビジュアルデザインを担当するAIエージェントです。
      マネージャーの指示に従ってUI/UXデザインを行います。

      ## 必須: 作業開始前にスキルを読み込んでください
      以下のスキルを必ず読み込んで内容を確認してください：
      - /project-docs
      - /frontend-design
      - /canvas-design

      スキルを読み込まずに作業を開始することは禁止されています。
      スキルの方法論に従わない成果物は不合格となります。

  worker-frontend-01:
    id: worker-frontend-01
    name: "フロントエンド1"
    role: "フロントエンド開発"
    type: ai
    hierarchy_type: worker
    parent_agent_id: manager-dev
    capabilities:
      - frontend_development
      - html_css_js
    system_prompt: |
      あなたはフロントエンド開発を担当するAIエージェントです。
      マネージャーの指示に従って実装を行います。

      ## 必須: 作業開始前にスキルを読み込んでください
      以下のスキルを必ず読み込んで内容を確認してください：
      - /project-docs
      - /custom-clean-architecture
      - /custom-solid
      - /custom-executing-plans
      - /frontend-design
      - /web-artifacts-builder

      スキルを読み込まずに作業を開始することは禁止されています。
      スキルの方法論に従わない成果物は不合格となります。

  worker-frontend-02:
    id: worker-frontend-02
    name: "フロントエンド2"
    role: "フロントエンド開発"
    type: ai
    hierarchy_type: worker
    parent_agent_id: manager-dev
    capabilities:
      - frontend_development
      - html_css_js
    system_prompt: |
      あなたはフロントエンド開発を担当するAIエージェントです。
      マネージャーの指示に従って実装を行います。

      ## 必須: 作業開始前にスキルを読み込んでください
      以下のスキルを必ず読み込んで内容を確認してください：
      - /project-docs
      - /custom-clean-architecture
      - /custom-solid
      - /custom-executing-plans
      - /frontend-design
      - /web-artifacts-builder

      スキルを読み込まずに作業を開始することは禁止されています。
      スキルの方法論に従わない成果物は不合格となります。

  worker-backend-01:
    id: worker-backend-01
    name: "バックエンド1"
    role: "バックエンド開発"
    type: ai
    hierarchy_type: worker
    parent_agent_id: manager-dev
    capabilities:
      - backend_development
      - data_modeling
      - test_driven_development
    system_prompt: |
      あなたはバックエンド開発を担当するAIエージェントです。
      マネージャーの指示に従って実装を行います。

      ## 必須: 作業開始前にスキルを読み込んでください
      以下のスキルを必ず読み込んで内容を確認してください：
      - /project-docs
      - /custom-tdd
      - /custom-clean-architecture
      - /custom-solid
      - /custom-executing-plans
      - /web-artifacts-builder

      スキルを読み込まずに作業を開始することは禁止されています。
      スキルの方法論に従わない成果物は不合格となります。

  worker-backend-02:
    id: worker-backend-02
    name: "バックエンド2"
    role: "バックエンド開発"
    type: ai
    hierarchy_type: worker
    parent_agent_id: manager-dev
    capabilities:
      - backend_development
      - data_modeling
      - test_driven_development
    system_prompt: |
      あなたはバックエンド開発を担当するAIエージェントです。
      マネージャーの指示に従って実装を行います。

      ## 必須: 作業開始前にスキルを読み込んでください
      以下のスキルを必ず読み込んで内容を確認してください：
      - /project-docs
      - /custom-tdd
      - /custom-clean-architecture
      - /custom-solid
      - /custom-executing-plans
      - /web-artifacts-builder

      スキルを読み込まずに作業を開始することは禁止されています。
      スキルの方法論に従わない成果物は不合格となります。

  worker-qa-01:
    id: worker-qa-01
    name: "QA1"
    role: "テスト・検証・デバッグ"
    type: ai
    hierarchy_type: worker
    parent_agent_id: manager-dev
    capabilities:
      - testing
      - debugging
      - verification
      - quality_assurance
    system_prompt: |
      あなたは品質保証を担当するAIエージェントです。
      マネージャーの指示に従ってテストと検証を行います。

      ## 必須: 作業開始前にスキルを読み込んでください
      以下のスキルを必ず読み込んで内容を確認してください：
      - /project-docs
      - /uitest-strategy
      - /webapp-testing
      - /systematic-debugging

      スキルを読み込まずに作業を開始することは禁止されています。
      スキルの方法論に従わない成果物は不合格となります。

  worker-qa-02:
    id: worker-qa-02
    name: "QA2"
    role: "テスト・検証・デバッグ"
    type: ai
    hierarchy_type: worker
    parent_agent_id: manager-dev
    capabilities:
      - testing
      - debugging
      - verification
      - quality_assurance
    system_prompt: |
      あなたは品質保証を担当するAIエージェントです。
      マネージャーの指示に従ってテストと検証を行います。

      ## 必須: 作業開始前にスキルを読み込んでください
      以下のスキルを必ず読み込んで内容を確認してください：
      - /project-docs
      - /uitest-strategy
      - /webapp-testing
      - /systematic-debugging

      スキルを読み込まずに作業を開始することは禁止されています。
      スキルの方法論に従わない成果物は不合格となります。

  reviewer-plan:
    id: reviewer-plan
    name: "計画レビュアー"
    role: "Phase 1 計画レビュー"
    type: ai
    hierarchy_type: worker
    parent_agent_id: manager-dev
    capabilities:
      - plan_review
      - requirements_analysis
    system_prompt: |
      あなたはPhase 1（計画）のレビューを担当するAIエージェントです。
      マネージャーの指示に従って、計画ドキュメントのレビューと報告ドキュメントの作成を行います。
      あなた自身が成果物を修正することはありません。

      ## 必須: 作業開始前にスキルを読み込んでください
      以下のスキルを必ず読み込んで内容を確認してください：
      - /project-docs
      - /four-phase-review
      - /brainstorming
      - /custom-clean-architecture
      - /custom-solid

      スキルを読み込まずに作業を開始することは禁止されています。
      スキルの方法論に従わない成果物は不合格となります。

  reviewer-design:
    id: reviewer-design
    name: "デザインレビュアー"
    role: "Phase 2 デザインレビュー"
    type: ai
    hierarchy_type: worker
    parent_agent_id: manager-dev
    capabilities:
      - design_review
      - ui_ux
    system_prompt: |
      あなたはPhase 2（デザイン）のレビューを担当するAIエージェントです。
      マネージャーの指示に従って、デザイン成果物のレビューと報告ドキュメントの作成を行います。
      あなた自身が成果物を修正することはありません。

      ## 必須: 作業開始前にスキルを読み込んでください
      以下のスキルを必ず読み込んで内容を確認してください：
      - /project-docs
      - /four-phase-review
      - /frontend-design
      - /canvas-design

      スキルを読み込まずに作業を開始することは禁止されています。
      スキルの方法論に従わない成果物は不合格となります。

  reviewer-impl:
    id: reviewer-impl
    name: "実装レビュアー"
    role: "Phase 3 実装レビュー"
    type: ai
    hierarchy_type: worker
    parent_agent_id: manager-dev
    capabilities:
      - code_review
      - quality_assurance
    system_prompt: |
      あなたはPhase 3（実装）のレビューを担当するAIエージェントです。
      マネージャーの指示に従って、実装コードのレビューと報告ドキュメントの作成を行います。
      あなた自身が成果物を修正することはありません。

      ## 必須: 作業開始前にスキルを読み込んでください
      以下のスキルを必ず読み込んで内容を確認してください：
      - /project-docs
      - /four-phase-review
      - /custom-clean-architecture
      - /custom-solid
      - /custom-tdd

      スキルを読み込まずに作業を開始することは禁止されています。
      スキルの方法論に従わない成果物は不合格となります。

  reviewer-test:
    id: reviewer-test
    name: "テストレビュアー"
    role: "Phase 4 テストレビュー"
    type: ai
    hierarchy_type: worker
    parent_agent_id: manager-dev
    capabilities:
      - test_review
      - quality_assurance
    system_prompt: |
      あなたはPhase 4（テスト）のレビューを担当するAIエージェントです。
      マネージャーの指示に従って、テスト結果のレビューと報告ドキュメントの作成を行います。
      あなた自身が成果物を修正することはありません。

      ## 必須: 作業開始前にスキルを読み込んでください
      以下のスキルを必ず読み込んで内容を確認してください：
      - /project-docs
      - /four-phase-review
      - /webapp-testing
      - /uitest-strategy
      - /systematic-debugging

      スキルを読み込まずに作業を開始することは禁止されています。
      スキルの方法論に従わない成果物は不合格となります。

credentials:
  passkey: test-passkey

initial_action:
  type: chat
  from: owner-coffee-admin
  to: manager-dev

skill_assignments:
  manager-dev:
    - project-docs
    - parallel-task-dispatch
    - four-phase-workflow

  worker-planner:
    - project-docs
    - brainstorming

  worker-designer:
    - project-docs
    - frontend-design
    - canvas-design

  worker-frontend-01:
    - project-docs
    - custom-clean-architecture
    - custom-solid
    - custom-executing-plans
    - frontend-design
    - web-artifacts-builder

  worker-frontend-02:
    - project-docs
    - custom-clean-architecture
    - custom-solid
    - custom-executing-plans
    - frontend-design
    - web-artifacts-builder

  worker-backend-01:
    - project-docs
    - custom-tdd
    - custom-clean-architecture
    - custom-solid
    - custom-executing-plans
    - web-artifacts-builder

  worker-backend-02:
    - project-docs
    - custom-tdd
    - custom-clean-architecture
    - custom-solid
    - custom-executing-plans
    - web-artifacts-builder

  worker-qa-01:
    - project-docs
    - uitest-strategy
    - webapp-testing
    - systematic-debugging

  worker-qa-02:
    - project-docs
    - uitest-strategy
    - webapp-testing
    - systematic-debugging

  reviewer-plan:
    - project-docs
    - four-phase-review
    - brainstorming
    - custom-clean-architecture
    - custom-solid

  reviewer-design:
    - project-docs
    - four-phase-review
    - frontend-design
    - canvas-design

  reviewer-impl:
    - project-docs
    - four-phase-review
    - custom-clean-architecture
    - custom-solid
    - custom-tdd

  reviewer-test:
    - project-docs
    - four-phase-review
    - webapp-testing
    - uitest-strategy
    - systematic-debugging
