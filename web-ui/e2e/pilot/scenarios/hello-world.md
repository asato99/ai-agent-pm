# パイロットシナリオ: hello-world

## 概要

最小構成で AI Agent PM の基本的な開発フローを検証する。
実際の AI エージェントが「Hello World」スクリプトを作成・確認することで、エージェント協調の有効性を検証する。

## 目的

- Manager による適切なタスク分解を検証
- Worker 間の依存関係に基づく作業フローを検証
- 実際の成果物（動作するコード）が生成されることを検証

## エージェント構成

### Owner（人間役 = テストスクリプト）

| 項目 | 値 |
|------|-----|
| ID | `owner-pilot` |
| 名前 | パイロットオーナー |
| 種別 | `human` |
| 階層 | `owner` |

テストスクリプト（Playwright）が Owner 役として UI を操作し、Manager に要件を伝達する。

---

### Manager（AI）

| 項目 | 値 |
|------|-----|
| ID | `manager-pilot` |
| 名前 | 開発マネージャー |
| 種別 | `ai` |
| 階層 | `manager` |
| 親エージェント | `owner-pilot` |
| Provider | `anthropic` |
| Model | `claude-sonnet-4-20250514` |

**システムプロンプト**:

```text
あなたは開発マネージャーです。

## 責務
- Ownerからの要件を理解し、実行可能なタスクに分解する
- 各タスクを適切なWorkerに割り当てる
- タスク間の依存関係を設定する

## 行動指針
- タスクは1つの明確な成果物を持つ粒度に分解する
- 実装タスクと確認タスクは別のWorkerに割り当てる
- 自分自身で実装や確認作業は行わない（管理業務のみ）

## 利用可能なWorker
- worker-dev-pilot: 実装担当
- worker-review-pilot: 確認担当
```

---

### Worker-Dev（AI）

| 項目 | 値 |
|------|-----|
| ID | `worker-dev-pilot` |
| 名前 | 開発エンジニア |
| 種別 | `ai` |
| 階層 | `worker` |
| 親エージェント | `manager-pilot` |
| Provider | `anthropic` |
| Model | `claude-sonnet-4-20250514` |

**システムプロンプト**:

```text
あなたは開発エンジニアです。

## 責務
- 割り当てられた実装タスクを遂行する
- コードを作成し、プロジェクトの作業ディレクトリに保存する
- 作業完了後、進捗を報告する

## 行動指針
- シンプルで読みやすいコードを書く
- ファイルは作業ディレクトリに保存する
- 完了したら必ずタスクのステータスを更新する
```

---

### Worker-Review（AI）

| 項目 | 値 |
|------|-----|
| ID | `worker-review-pilot` |
| 名前 | レビューエンジニア |
| 種別 | `ai` |
| 階層 | `worker` |
| 親エージェント | `manager-pilot` |
| Provider | `anthropic` |
| Model | `claude-sonnet-4-20250514` |

**システムプロンプト**:

```text
あなたはレビューエンジニアです。

## 責務
- 他のWorkerが作成した成果物を確認する
- 実際にコードを実行して動作を検証する
- 確認結果を報告する

## 行動指針
- 実装されたコードを実際に実行して確認する
- 期待通りの動作をするか検証する
- 問題があれば具体的に報告する
```

---

## プロジェクト設定

| 項目 | 値 |
|------|-----|
| ID | `project-pilot-hello` |
| 名前 | Hello World パイロット |
| 作業ディレクトリ | `web-ui/e2e/pilot/workspaces/hello-world` |

## テスト実行フロー

### Phase 1: 準備

テストスクリプトが以下を実行：

1. 作業ディレクトリをクリーンアップ
2. パイロット用エージェントがDBに存在することを確認
3. パイロット用プロジェクトを作成

### Phase 2: 要件伝達

テストスクリプトが Owner 役として UI を操作：

1. `owner-pilot` でログイン
2. プロジェクト `project-pilot-hello` を開く
3. `manager-pilot` とのチャットを開始
4. 以下のメッセージを送信：

```
「Hello, World!」を出力するPythonスクリプト hello.py を作成してください。
作成後、実行して動作確認も行ってください。
```

### Phase 3: 開発進行（AIエージェントが実行）

テストスクリプトは待機・観察のみ。実際の作業は AI エージェントが行う：

1. **Manager** がメッセージを受け取り、タスクを作成：
   - タスク1: `hello.py を作成する`（Worker-Dev に割当）
   - タスク2: `hello.py の動作確認`（Worker-Review に割当、タスク1に依存）

2. **Worker-Dev** がタスク1を実行：
   - コードを生成
   - `hello.py` を作業ディレクトリに保存
   - タスクを完了

3. **Worker-Review** がタスク2を実行（タスク1完了後）：
   - `python hello.py` を実行
   - 出力を確認
   - タスクを完了

### Phase 4: 検証

テストスクリプトが成功基準を検証：

1. タスクボードで全タスクが `done` であることを確認
2. `hello.py` ファイルが存在することを確認
3. `python hello.py` を実行し、出力が "Hello, World!" であることを確認

## 成功基準

| # | 基準 | 検証方法 |
|---|------|----------|
| 1 | Manager が2つのタスクを作成する | タスク数を確認 |
| 2 | タスク間に依存関係が設定される | タスク2の依存にタスク1が含まれる |
| 3 | Worker-Dev が `hello.py` を作成する | ファイルの存在確認 |
| 4 | Worker-Review が動作確認を行う | タスク2のコンテキストに結果が記録 |
| 5 | 全タスクが `done` になる | ステータス確認 |
| 6 | 成果物が正しく動作する | `python hello.py` の出力確認 |

## 所要時間（想定）

| フェーズ | 時間 |
|----------|------|
| 準備 | 30秒 |
| 要件伝達 | 30秒 |
| 開発進行 | 5〜15分 |
| 検証 | 30秒 |
| **合計** | **約10〜20分** |

## 観察ポイント

- Manager のタスク分解は適切か（粒度、依存関係）
- 各エージェントのプロンプトが行動に反映されているか
- Worker 間の作業引き継ぎはスムーズか
- 生成されたコードの品質

## 期待される成果物

```python
# web-ui/e2e/pilot/workspaces/hello-world/hello.py
print("Hello, World!")
```

実行結果：
```
$ python hello.py
Hello, World!
```
